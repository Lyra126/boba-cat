[gd_scene load_steps=24 format=3 uid="uid://ceqg4sr663xx2"]

[ext_resource type="Script" path="res://scenes/FinalStation/FinalStation.gd" id="1_ixfov"]
[ext_resource type="Texture2D" uid="uid://yfs1ito40fo4" path="res://assets/final_station/final_bg.png" id="2_jbb60"]
[ext_resource type="Texture2D" uid="uid://dgrc0fqly7e50" path="res://assets/final_station/openMachine.png" id="3_bwd7n"]
[ext_resource type="Script" path="res://scenes/FinalStation/finalcup.gd" id="3_fdyuf"]
[ext_resource type="Texture2D" uid="uid://bhs10ky3rsusa" path="res://assets/final_station/fullCookieCase.png" id="4_6l0m1"]
[ext_resource type="Texture2D" uid="uid://bc4d8sl6v755m" path="res://assets/liquid_station/assets/front_cup.png" id="4_hdwhh"]
[ext_resource type="Texture2D" uid="uid://bxpfb5nkcvbdp" path="res://assets/final_station/cookie.png" id="5_fly4n"]
[ext_resource type="Texture2D" uid="uid://21cd7rwmx4u3" path="res://assets/liquid_station/assets/back_cup.png" id="5_gn2qx"]
[ext_resource type="Script" path="res://scenes/FinalStation/cookie.gd" id="6_dke8q"]
[ext_resource type="Script" path="res://scenes/Toppings/liquid_inside_cup.gd" id="7_e7diu"]
[ext_resource type="Texture2D" uid="uid://cod1hk81g17u3" path="res://assets/buttons/normalBack.png" id="7_qudjk"]
[ext_resource type="Texture2D" uid="uid://c5nhvdg6r8njc" path="res://assets/buttons/pressedBack.png" id="8_0wbd3"]
[ext_resource type="Texture2D" uid="uid://ci7aa37fsuf7k" path="res://assets/buttons/hoverBack.png" id="9_d3pnv"]
[ext_resource type="Texture2D" uid="uid://b663f8bqtgw7d" path="res://assets/buttons/normalNext.png" id="10_nsn8g"]
[ext_resource type="Texture2D" uid="uid://cjhj7pjoqngfc" path="res://assets/final_station/lid.png" id="10_sw1nl"]
[ext_resource type="Texture2D" uid="uid://gw2radftsehp" path="res://assets/buttons/pressedNext.png" id="11_2cme3"]
[ext_resource type="Texture2D" uid="uid://vqsn6wx1oxr3" path="res://assets/buttons/hoverNext.png" id="12_2d1uf"]

[sub_resource type="GDScript" id="GDScript_14f8c"]
script/source = "extends StaticBody2D


# Called when the node enters the scene tree for the first time.
func _ready():
	modulate = Color(Color.MEDIUM_AQUAMARINE, 0.7)

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	#print(global_position)
	pass

func select():
	for child in get_tree().get_nodes_in_group(\"droppable\"):
		child.deselect()
	modulate = Color.BLUE

func deselect():
	modulate = Color.WHITE
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ijsh8"]
size = Vector2(354, 487.883)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c37ek"]
size = Vector2(334, 481.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_k3fie"]
size = Vector2(244.5, 519.119)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ioiw2"]
size = Vector2(255.034, 365.783)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ri56t"]
size = Vector2(367.809, 203.106)

[node name="FinalStation" type="Node2D"]
position = Vector2(807, 450)
scale = Vector2(0.632565, 0.618355)
script = ExtResource("1_ixfov")

[node name="TextureRect" type="TextureRect" parent="."]
offset_left = -1271.0
offset_top = -722.0
offset_right = 1259.0
offset_bottom = 735.0
texture = ExtResource("2_jbb60")
metadata/_edit_use_anchors_ = true

[node name="machine" type="Sprite2D" parent="."]
position = Vector2(-891.608, -124.524)
scale = Vector2(0.57989, 0.533915)
texture = ExtResource("3_bwd7n")

[node name="case" type="Sprite2D" parent="."]
position = Vector2(79.0432, 4.85161)
scale = Vector2(0.424686, 0.484817)
texture = ExtResource("4_6l0m1")

[node name="Area2D" type="Area2D" parent="."]
visible = false
position = Vector2(79.0432, 4.85168)
scale = Vector2(0.424686, 0.484817)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Area2D"]
position = Vector2(-14.3201, -21.1833)
scale = Vector2(0.85105, 1.1066)
build_mode = 1
polygon = PackedVector2Array(-1734.69, -667.734, -1478.18, -768.636, 1512.96, -768.636, 1739.03, -661.798, 1695.56, 727.087, 1004.29, 694.443, -113.037, 694.443, -117.385, 296.77, -921.688, 270.061, -952.121, 302.706, -995.597, 359.092, -952.121, 715.216, -1695.56, 730.055, -1730.34, -641.024)

[node name="cookie" type="Sprite2D" parent="."]
visible = false
position = Vector2(55.3303, 48.5158)
scale = Vector2(0.167166, 0.157229)
texture = ExtResource("5_fly4n")
script = ExtResource("6_dke8q")

[node name="cup" type="Node2D" parent="."]
position = Vector2(-105, 88)
scale = Vector2(0.75, 0.75)
script = ExtResource("3_fdyuf")

[node name="cup_spot" type="StaticBody2D" parent="cup" groups=["cup_drop", "droppable"]]
script = SubResource("GDScript_14f8c")

[node name="CollisionShape2D" type="CollisionShape2D" parent="cup/cup_spot"]
position = Vector2(-21, 377)
shape = SubResource("RectangleShape2D_ijsh8")
one_way_collision_margin = 0.0

[node name="cup_sprite" type="Node2D" parent="cup"]

[node name="FrontCup" type="Sprite2D" parent="cup/cup_sprite"]
z_index = 5
position = Vector2(-18, 362)
scale = Vector2(0.641872, 0.641872)
texture = ExtResource("4_hdwhh")

[node name="BackCup" type="Sprite2D" parent="cup/cup_sprite"]
position = Vector2(-18, 362)
scale = Vector2(0.642054, 0.642054)
texture = ExtResource("5_gn2qx")

[node name="cup_pick_up" type="Area2D" parent="cup/cup_sprite"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="cup/cup_sprite/cup_pick_up"]
position = Vector2(-23, 376.25)
shape = SubResource("RectangleShape2D_c37ek")

[node name="stuff_inside_cup" type="Node2D" parent="cup"]
script = ExtResource("7_e7diu")

[node name="Polygon2D" type="Polygon2D" parent="cup/stuff_inside_cup"]
clip_children = 1
position = Vector2(-20.1943, -61.2706)
scale = Vector2(0.997704, 0.997704)
polygon = PackedVector2Array(-172.754, 293.686, -109.358, 643.393, -87.1696, 665.461, -50.7168, 677.345, 9.5094, 684.135, 69.7357, 670.554, 109.358, 641.695, 155.32, 380.264, 172.754, 290.291, 182.264, 251.246, 191.773, 241.06, 193.358, 225.781, 145.811, 200.317, 76.0752, 188.434, -17.434, 186.737, -90.3395, 193.527, -158.49, 207.108, -191.773, 227.479)

[node name="toppings-5" type="Sprite2D" parent="cup/stuff_inside_cup/Polygon2D"]
position = Vector2(-7.55016, 213.472)
scale = Vector2(1.04942, 1.04942)

[node name="toppings-4" type="Sprite2D" parent="cup/stuff_inside_cup/Polygon2D"]
position = Vector2(4.53011, 267.261)
scale = Vector2(-0.996138, 1.08427)

[node name="toppings-3" type="Sprite2D" parent="cup/stuff_inside_cup/Polygon2D"]
position = Vector2(-4.53011, 342.901)

[node name="toppings-2" type="Sprite2D" parent="cup/stuff_inside_cup/Polygon2D"]
position = Vector2(9.06022, 403.413)
scale = Vector2(-0.88023, 1.01495)

[node name="toppings-1" type="Sprite2D" parent="cup/stuff_inside_cup/Polygon2D"]
position = Vector2(-4.5301, 485.776)
scale = Vector2(0.911684, 0.93467)

[node name="liquid_sprite" type="Sprite2D" parent="cup/stuff_inside_cup/Polygon2D"]
position = Vector2(10.5703, 218.515)

[node name="Lid" type="Sprite2D" parent="cup"]
visible = false
position = Vector2(-22.3022, 158.668)
scale = Vector2(0.636206, 0.571847)
texture = ExtResource("10_sw1nl")

[node name="AttachLid" type="Area2D" parent="." groups=["droppable"]]
position = Vector2(-878.961, 35.5783)

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttachLid"]
position = Vector2(1.58087, -3.23438)
shape = SubResource("RectangleShape2D_k3fie")

[node name="Back" type="TextureButton" parent="."]
offset_left = -1272.74
offset_top = 384.525
offset_right = -272.743
offset_bottom = 1384.53
scale = Vector2(0.4, 0.4)
texture_normal = ExtResource("7_qudjk")
texture_pressed = ExtResource("8_0wbd3")
texture_hover = ExtResource("9_d3pnv")
metadata/_edit_use_anchors_ = true

[node name="SubmitOrder" type="TextureButton" parent="."]
offset_left = 792.013
offset_top = 363.869
offset_right = 1792.01
offset_bottom = 1363.87
scale = Vector2(0.404201, 0.407558)
texture_normal = ExtResource("10_nsn8g")
texture_pressed = ExtResource("11_2cme3")
texture_hover = ExtResource("12_2d1uf")

[node name="InitialPos" type="Area2D" parent="."]
position = Vector2(-129.631, 363.869)

[node name="CollisionShape2D" type="CollisionShape2D" parent="InitialPos"]
position = Vector2(3.16177, 4.57764e-05)
shape = SubResource("RectangleShape2D_ioiw2")

[node name="cookieSpot" type="Area2D" parent="."]
position = Vector2(268.747, 491.627)

[node name="CollisionShape2D" type="CollisionShape2D" parent="cookieSpot"]
position = Vector2(-1.58082, 6.46879)
shape = SubResource("RectangleShape2D_ri56t")

[node name="caseCollision" type="Area2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="caseCollision"]
polygon = PackedVector2Array(-550.141, -359.017, -458.451, -414.002, 630.765, -417.236, 714.551, -355.783, 695.581, 401.064, 30.0364, 399.447, 28.4556, 150.399, -281.394, 148.782, -279.813, 399.447, -543.818, 401.064)

[connection signal="input_event" from="Area2D" to="cookie" method="_on_area_2d_input_event"]
[connection signal="mouse_entered" from="Area2D" to="cookie" method="_on_area_2d_mouse_entered"]
[connection signal="body_entered" from="cup/cup_sprite/cup_pick_up" to="cup" method="_on_cup_pick_up_body_entered"]
[connection signal="body_exited" from="cup/cup_sprite/cup_pick_up" to="cup" method="_on_cup_pick_up_body_exited"]
[connection signal="input_event" from="cup/cup_sprite/cup_pick_up" to="cup" method="_on_cup_pick_up_input_event"]
[connection signal="input_event" from="AttachLid" to="cup" method="_on_attach_lid_input_event"]
[connection signal="pressed" from="Back" to="." method="_on_back_pressed"]
[connection signal="pressed" from="SubmitOrder" to="." method="_on_submit_order_pressed"]
[connection signal="input_event" from="InitialPos" to="cup" method="_on_initial_pos_input_event"]
[connection signal="input_event" from="cookieSpot" to="cookie" method="_on_cookie_spot_input_event"]
[connection signal="input_event" from="caseCollision" to="cookie" method="_on_case_collision_input_event"]
